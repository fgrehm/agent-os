## Chezmoi structure and organization standards

- **Project Root with .chezmoiroot**: Create `.chezmoiroot` at project root containing `home` to separate chezmoi files from project infrastructure
- **Source Directory Structure**: Use `home/` as chezmoi source directory containing all special files and managed dotfiles
- **Special Files in Source**: Place all special files (`.chezmoi.toml.tmpl`, `.chezmoiignore`, etc.) in `home/` directory, not project root
- **Scripts in .chezmoiscripts/**: Put run scripts (`run_once_*`, `run_onchange_*`) in `home/.chezmoiscripts/` to keep target home directory clean
- **Dynamic vs Static Data**: Use `.chezmoi.toml.tmpl` for environment detection and prompts, `.chezmoidata` files for static constants
- **External Dependencies**: Manage external files via `.chezmoiexternal.toml` with checksums and refresh periods
- **Conditional Management**: Use `.chezmoiignore` with template logic for machine-specific file exclusions
- **File Naming Attributes**: Combine prefixes with underscores: `private_dot_ssh_config`, `executable_run_once_10_setup.sh`
- **Execution Order**: Use numeric prefixes for scripts (10, 20, 30) to control execution order
- **Symlink Pattern**: For externally-modified configs (nvim, etc.), symlink to `{{ .chezmoi.workingTree }}/configs/` for git tracking
- **Template Organization**: Use `.chezmoitemplates/` for shared template functions and reusable snippets
- **Version Requirements**: Set `.chezmoiversion` to ensure compatibility with required chezmoi features
- **Safety First**: ALWAYS use `chezmoi apply --dry-run` before applying; test in Docker/VMs, never on development host directly
- **Attribute Prefixes**: Use `dot_` for dotfiles, `executable_` for scripts, `private_` for sensitive files (600), `symlink_` for links
- **Processing Order Awareness**: Remember chezmoi processes .chezmoiroot → config template → data files → templates → ignore → regular files
- **Clean Organization**: Separate concerns (chezmoi in `home/`, utilities in `scripts/`, tests in `tests/`, configs in `configs/`)
- **State Management**: Ignore `.chezmoistate` in version control (chezmoi's internal state tracking)
- **Template Simplicity**: Keep template logic simple and readable; document complex decisions with comments
- **Removal Management**: Use `.chezmoiremove` to specify obsolete target files that should be cleaned up
